<div class="dashboard-container">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">ðŸŽµ Welcome to Sportify ðŸŽµ</h1>
        <p class="hero-subtitle">
          Your ultimate music discovery platform. Explore new releases, trending
          artists, and personalized recommendations powered by Spotify's vast
          music library.
        </p>
        <div class="hero-stats">
          <div class="stat-item">
            <i class="fas fa-music"></i>
            <span>Millions of Songs</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-users"></i>
            <span>Top Artists</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-fire"></i>
            <span>Trending Now</span>
          </div>
        </div>
        <div class="hero-actions">
          <a routerLink="/search" class="btn btn-primary btn-lg">
            <i class="fas fa-search"></i> Explore Music
          </a>
          <a
            routerLink="/search"
            [queryParams]="{ q: 'trending', type: 'track' }"
            class="btn btn-outline-light btn-lg"
          >
            <i class="fas fa-fire"></i> Trending Now
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- New Releases -->
    <section
      class="section"
      *ngIf="!loading.newReleases || newReleases.length > 0"
    >
      <div class="section-header">
        <h2 class="section-title"><i class="fas fa-music"></i> New Releases</h2>
        <button
          class="btn btn-outline-primary btn-sm"
          (click)="viewAllAlbums()"
        >
          View All
        </button>
      </div>

      <div class="loading-container" *ngIf="loading.newReleases">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <div class="album-grid" *ngIf="!loading.newReleases">
        <div
          class="album-card"
          *ngFor="let album of newReleases"
          (click)="viewAlbum(album)"
        >
          <div class="album-image">
            <img [src]="getImageUrl(album.images)" [alt]="album.name" />
            <div
              class="play-overlay"
              (click)="playAlbumPreview(album); $event.stopPropagation()"
            >
              <i
                class="fas"
                [class.fa-play]="playingAlbumId !== album.id"
                [class.fa-spinner]="playingAlbumId === album.id"
                [class.fa-spin]="playingAlbumId === album.id"
              ></i>
            </div>
          </div>
          <div class="album-info">
            <h5 class="album-name">{{ album.name }}</h5>
            <p class="album-artist">{{ album.artists[0].name }}</p>
            <p class="album-date">
              {{ album.release_date | date : "MMM yyyy" }}
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Trending Artists -->
    <section
      class="section"
      *ngIf="!loading.artists || trendingArtists.length > 0"
    >
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-users"></i> Trending Artists
        </h2>
        <button
          class="btn btn-outline-primary btn-sm"
          (click)="viewAllArtists()"
        >
          View All
        </button>
      </div>

      <div class="loading-container" *ngIf="loading.artists">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <div class="artist-grid" *ngIf="!loading.artists">
        <div
          class="artist-card"
          *ngFor="let artist of trendingArtists"
          (click)="viewArtist(artist)"
        >
          <div class="artist-image">
            <img [src]="getImageUrl(artist.images)" [alt]="artist.name" />
            <div class="play-overlay">
              <i class="fas fa-music"></i>
            </div>
          </div>
          <div class="artist-info">
            <h5 class="artist-name">{{ artist.name }}</h5>
            <p class="artist-followers">
              {{ formatNumber(artist.followers?.total) }} followers
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Categories -->
    <section
      class="section"
      *ngIf="!loading.categories || categories.length > 0"
    >
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-th-large"></i> Browse by Category
        </h2>
        <button
          class="btn btn-outline-primary btn-sm"
          (click)="viewAllCategories()"
        >
          View All
        </button>
      </div>

      <div class="loading-container" *ngIf="loading.categories">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <div class="category-grid" *ngIf="!loading.categories">
        <div
          class="category-card"
          *ngFor="let category of categories; trackBy: trackByCategoryId"
          (click)="viewCategory(category, $event)"
          [title]="'Click to view ' + category.name + ' playlists'"
        >
          <div class="category-image">
            <img [src]="getImageUrl(category.icons)" [alt]="category.name" />
            <div class="play-overlay">
              <i class="fas fa-music"></i>
            </div>
          </div>
          <div class="category-info">
            <h5 class="category-name">{{ category.name }}</h5>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
